# ğŸ—ï¸ Plex Poster Set Helper - Architecture Documentation

> **A comprehensive visual guide to the application's layered architecture**

## ğŸ“‹ Table of Contents
- [System Overview](#-system-overview)
- [Architecture Layers](#-architecture-layers)
- [Data Flow](#-data-flow)
- [Component Interaction](#-component-interaction)
- [Technology Stack](#-technology-stack)

---

## ğŸ¯ System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PLEX POSTER SET HELPER                               â”‚
â”‚                                                                         â”‚
â”‚  Purpose: Automated poster scraping and uploading for Plex libraries   â”‚
â”‚  Pattern: Layered Architecture with Service-Oriented Design            â”‚
â”‚  Interfaces: Dual-mode (CLI + GUI)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›ï¸ Architecture Layers

### Layer 0: Entry Point
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          main.py                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Responsibilities:                                              â”‚
â”‚  â€¢ Application bootstrap and initialization                     â”‚
â”‚  â€¢ Playwright browser dependency check & installation           â”‚
â”‚  â€¢ Command-line argument routing                                â”‚
â”‚  â€¢ Cleanup & lifecycle management                               â”‚
â”‚                                                                 â”‚
â”‚  Entry Modes:                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   GUI   â”‚  â”‚   CLI   â”‚  â”‚  BULK   â”‚  â”‚   URL   â”‚          â”‚
â”‚  â”‚  mode   â”‚  â”‚  mode   â”‚  â”‚  mode   â”‚  â”‚  mode   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â”‚
â”‚       â”‚            â”‚             â”‚             â”‚                â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                         â–¼                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Layer 1: User Interface Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          UI LAYER (src/ui/)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         GUI MODULE            â”‚          CLI MODULE                    â”‚
â”‚    (CustomTkinter-based)      â”‚      (Interactive Terminal)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                               â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   PlexPosterGUI         â”‚ â”‚  â”‚   PlexPosterCLI                  â”‚ â”‚
â”‚  â”‚   (app.py)              â”‚ â”‚  â”‚   (app.py)                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚                    â”‚           â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Tab Components:        â”‚ â”‚  â”‚  Handler Components:           â”‚  â”‚
â”‚  â”‚                         â”‚ â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  â€¢ PosterScrapeTab      â”‚ â”‚  â”‚  â€¢ URLHandler                  â”‚  â”‚
â”‚  â”‚  â€¢ BulkImportTab        â”‚ â”‚  â”‚  â€¢ MappingHandler              â”‚  â”‚
â”‚  â”‚  â€¢ TitleMappingsTab     â”‚ â”‚  â”‚  â€¢ ResetHandler                â”‚  â”‚
â”‚  â”‚  â€¢ ManageLabelsTab      â”‚ â”‚  â”‚  â€¢ StatsHandler                â”‚  â”‚
â”‚  â”‚  â€¢ SettingsTab          â”‚ â”‚  â”‚                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â”‚                    â”‚           â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚           â”‚                           â”‚
â”‚  â”‚  UI Handlers:           â”‚ â”‚           â”‚                           â”‚
â”‚  â”‚                         â”‚ â”‚           â”‚                           â”‚
â”‚  â”‚  â€¢ ScrapeHandler        â”‚ â”‚           â”‚                           â”‚
â”‚  â”‚  â€¢ LabelHandler         â”‚ â”‚           â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚           â”‚                           â”‚
â”‚          â”‚                    â”‚           â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚           â”‚                           â”‚
â”‚  â”‚  Widgets:               â”‚ â”‚           â”‚                           â”‚
â”‚  â”‚                         â”‚ â”‚           â”‚                           â”‚
â”‚  â”‚  â€¢ DynamicList          â”‚ â”‚           â”‚                           â”‚
â”‚  â”‚  â€¢ DoubleEntryRow       â”‚ â”‚           â”‚                           â”‚
â”‚  â”‚  â€¢ EntryRow             â”‚ â”‚           â”‚                           â”‚
â”‚  â”‚  â€¢ SliderControl        â”‚ â”‚           â”‚                           â”‚
â”‚  â”‚  â€¢ UIHelpers            â”‚ â”‚           â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚           â”‚                           â”‚
â”‚                               â”‚           â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                           â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
```

**UI Layer Features:**
- **Dual Interface Support**: Both GUI (CustomTkinter) and CLI (Terminal-based)
- **Modular Tab System**: Separated concerns for different functionalities
- **Reusable Widgets**: Custom UI components for consistency
- **Handler Pattern**: Business logic separated from UI rendering

---

### Layer 2: Service Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SERVICE LAYER (src/services/)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   PlexService                â”‚    â”‚  PosterUploadService         â”‚ â”‚
â”‚  â”‚   (plex_service.py)          â”‚    â”‚  (poster_upload_service.py)  â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  Responsibilities:           â”‚    â”‚  Responsibilities:           â”‚ â”‚
â”‚  â”‚  â€¢ Server connection mgmt    â”‚    â”‚  â€¢ Poster image download     â”‚ â”‚
â”‚  â”‚  â€¢ Library discovery         â”‚    â”‚  â€¢ Temp file management      â”‚ â”‚
â”‚  â”‚  â€¢ Media item search         â”‚    â”‚  â€¢ Plex upload coordination  â”‚ â”‚
â”‚  â”‚  â€¢ Title matching & fuzzy    â”‚    â”‚  â€¢ Rate limiting (0.5-1s)    â”‚ â”‚
â”‚  â”‚  â€¢ Label management          â”‚    â”‚  â€¢ Source-based labels       â”‚ â”‚
â”‚  â”‚  â€¢ Statistics gathering      â”‚    â”‚  â€¢ Batch processing          â”‚ â”‚
â”‚  â”‚                              â”‚    â”‚  â€¢ Error handling            â”‚ â”‚
â”‚  â”‚  Key Methods:                â”‚    â”‚                              â”‚ â”‚
â”‚  â”‚  â€¢ setup()                   â”‚    â”‚  Key Methods:                â”‚ â”‚
â”‚  â”‚  â€¢ find_movie()              â”‚    â”‚  â€¢ upload_poster()           â”‚ â”‚
â”‚  â”‚  â€¢ find_tv_show()            â”‚    â”‚  â€¢ _download_image()         â”‚ â”‚
â”‚  â”‚  â€¢ find_collection()         â”‚    â”‚  â€¢ _cleanup_temp_file()      â”‚ â”‚
â”‚  â”‚  â€¢ fuzzy_match()             â”‚    â”‚  â€¢ _rate_limit()             â”‚ â”‚
â”‚  â”‚  â€¢ get_all_labels()          â”‚    â”‚  â€¢ _add_source_labels()      â”‚ â”‚
â”‚  â”‚  â€¢ remove_labels()           â”‚    â”‚  â€¢ process_posters()         â”‚ â”‚
â”‚  â”‚  â€¢ gather_stats()            â”‚    â”‚                              â”‚ â”‚
â”‚  â”‚                              â”‚    â”‚                              â”‚ â”‚
â”‚  â”‚  Dependencies:               â”‚    â”‚  Dependencies:               â”‚ â”‚
â”‚  â”‚  â€¢ plexapi library           â”‚    â”‚  â€¢ requests library          â”‚ â”‚
â”‚  â”‚  â€¢ FuzzyWuzzy matching       â”‚    â”‚  â€¢ tempfile module           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                 â”‚                                 â”‚                    â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
```

**Service Layer Characteristics:**
- **Business Logic Hub**: Core operations isolated from UI
- **PlexAPI Integration**: Direct communication with Plex Media Server
- **Stateful Services**: Maintain connections and configurations
- **Error Handling**: Comprehensive exception management

---

### Layer 3: Scraper Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SCRAPER LAYER (src/scrapers/)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     ScraperFactory                               â”‚ â”‚
â”‚  â”‚                  (scraper_factory.py)                            â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â€¢ URL routing and detection                                     â”‚ â”‚
â”‚  â”‚  â€¢ Scraper instance creation                                     â”‚ â”‚
â”‚  â”‚  â€¢ Thread-safe operations                                        â”‚ â”‚
â”‚  â”‚  â€¢ Local HTML file support                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚                                                            â”‚
â”‚          â”‚          Factory Pattern                                  â”‚
â”‚          â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚              BaseScraper (ABC)                         â”‚          â”‚
â”‚  â”‚           (base_scraper.py)                            â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚  Provides:                                             â”‚          â”‚
â”‚  â”‚  â€¢ Playwright browser automation                       â”‚          â”‚
â”‚  â”‚  â€¢ Anti-detection measures:                            â”‚          â”‚
â”‚  â”‚    - User agent rotation (7 variants)                  â”‚          â”‚
â”‚  â”‚    - Viewport randomization (5 sizes)                  â”‚          â”‚
â”‚  â”‚    - Random delays & human-like timing                 â”‚          â”‚
â”‚  â”‚    - Stealth mode configuration                        â”‚          â”‚
â”‚  â”‚  â€¢ Rate limiting & batch delays                        â”‚          â”‚
â”‚  â”‚  â€¢ Context manager protocol                            â”‚          â”‚
â”‚  â”‚  â€¢ Abstract methods for implementation                 â”‚          â”‚
â”‚  â”‚                                                         â”‚          â”‚
â”‚  â”‚  Configuration:                                        â”‚          â”‚
â”‚  â”‚  â€¢ Min delay: 0.1s (configurable)                      â”‚          â”‚
â”‚  â”‚  â€¢ Max delay: 0.5s (configurable)                      â”‚          â”‚
â”‚  â”‚  â€¢ Batch delay: 2.0s every 10 requests                 â”‚          â”‚
â”‚  â”‚  â€¢ Page wait: 0.0-0.5s for JS execution                â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚          â”‚                                 â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  PosterDBScraper    â”‚         â”‚  MediuxScraper      â”‚             â”‚
â”‚  â”‚  (posterdb_scraper) â”‚         â”‚  (mediux_scraper)   â”‚             â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚  â”‚  Sources:           â”‚         â”‚  Sources:           â”‚             â”‚
â”‚  â”‚  â€¢ Set pages        â”‚         â”‚  â€¢ Set collections  â”‚             â”‚
â”‚  â”‚  â€¢ User profiles    â”‚         â”‚  â€¢ Poster galleries â”‚             â”‚
â”‚  â”‚  â€¢ Single posters   â”‚         â”‚                     â”‚             â”‚
â”‚  â”‚                     â”‚         â”‚  Capabilities:      â”‚             â”‚
â”‚  â”‚  Capabilities:      â”‚         â”‚  â€¢ Multi-page nav   â”‚             â”‚
â”‚  â”‚  â€¢ Multi-page scrapeâ”‚         â”‚  â€¢ Image extraction â”‚             â”‚
â”‚  â”‚  â€¢ Metadata extract â”‚         â”‚  â€¢ Title parsing    â”‚             â”‚
â”‚  â”‚  â€¢ Season/Episode   â”‚         â”‚                     â”‚             â”‚
â”‚  â”‚  â€¢ Collections      â”‚         â”‚                     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
```

**Scraper Layer Intelligence:**
- **Playwright-Powered**: Full browser automation with JavaScript support
- **Multi-Source Support**: ThePosterDB, MediUX, Local HTML
- **Anti-Scraping Bypass**: Human-like behavior simulation
- **Parallel Safe**: Thread-safe design for concurrent operations

---

### Layer 4: Core Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CORE LAYER (src/core/)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   ConfigManager  â”‚  â”‚    Logger        â”‚  â”‚   PosterInfo     â”‚    â”‚
â”‚  â”‚   (config.py)    â”‚  â”‚  (logger.py)     â”‚  â”‚   (models.py)    â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ â€¢ JSON storage   â”‚  â”‚ â€¢ Centralized    â”‚  â”‚ â€¢ Data class     â”‚    â”‚
â”‚  â”‚ â€¢ Config schema  â”‚  â”‚ â€¢ File logging   â”‚  â”‚ â€¢ Type hints     â”‚    â”‚
â”‚  â”‚ â€¢ Validation     â”‚  â”‚ â€¢ Debug levels   â”‚  â”‚ â€¢ Metadata       â”‚    â”‚
â”‚  â”‚ â€¢ Defaults       â”‚  â”‚ â€¢ UTF-8 support  â”‚  â”‚                  â”‚    â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚ Fields:          â”‚    â”‚
â”‚  â”‚ Settings:        â”‚  â”‚ Output:          â”‚  â”‚ â€¢ title: str     â”‚    â”‚
â”‚  â”‚ â€¢ base_url       â”‚  â”‚ â€¢ debug.log      â”‚  â”‚ â€¢ url: str       â”‚    â”‚
â”‚  â”‚ â€¢ token          â”‚  â”‚ â€¢ Console echo   â”‚  â”‚ â€¢ source: str    â”‚    â”‚
â”‚  â”‚ â€¢ libraries      â”‚  â”‚                  â”‚  â”‚ â€¢ year: int?     â”‚    â”‚
â”‚  â”‚ â€¢ bulk_files     â”‚  â”‚                  â”‚  â”‚ â€¢ season: any?   â”‚    â”‚
â”‚  â”‚ â€¢ mappings       â”‚  â”‚                  â”‚  â”‚ â€¢ episode: any?  â”‚    â”‚
â”‚  â”‚ â€¢ max_workers    â”‚  â”‚                  â”‚  â”‚                  â”‚    â”‚
â”‚  â”‚ â€¢ scraper delays â”‚  â”‚                  â”‚  â”‚ Methods:         â”‚    â”‚
â”‚  â”‚ â€¢ log_file       â”‚  â”‚                  â”‚  â”‚ â€¢ is_tv_show()   â”‚    â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚ â€¢ is_movie()     â”‚    â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚ â€¢ is_collection()â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Core Components:**
- **Configuration Management**: Centralized JSON-based settings
- **Logging Infrastructure**: Detailed debug and operation tracking
- **Data Models**: Type-safe domain objects

---

### Layer 5: Utilities Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UTILITIES LAYER (src/utils/)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Helpers                   â”‚    â”‚   TextUtils                  â”‚  â”‚
â”‚  â”‚   (helpers.py)              â”‚    â”‚   (text_utils.py)            â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  â€¢ resource_path()          â”‚    â”‚  â€¢ parse_urls()              â”‚  â”‚
â”‚  â”‚  â€¢ get_exe_dir()            â”‚    â”‚  â€¢ URL extraction from text  â”‚  â”‚
â”‚  â”‚  â€¢ Path resolution          â”‚    â”‚  â€¢ Multi-line support        â”‚  â”‚
â”‚  â”‚  â€¢ Asset loading            â”‚    â”‚  â€¢ Format validation         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow

### Complete User Journey: Scraping and Uploading Posters

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DATA FLOW DIAGRAM                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    USER INPUT
       â”‚
       â”‚  (1) URL or Bulk File
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Entry Point â”‚  main.py
â”‚  (Layer 0)   â”‚  â€¢ Validates Playwright installation
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â€¢ Routes to appropriate interface
       â”‚
       â”‚  (2) Command routing
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    UI Layer (Layer 1)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ GUI (Tabs) â”‚  â”‚ CLI (Menu)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                 â”‚
         â”‚  (3) User selects scraping operation
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Scraper Factory (Layer 3)             â”‚
â”‚   â€¢ Detects URL type                    â”‚
â”‚   â€¢ Creates appropriate scraper         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚  (4) URL analysis
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Specific Scraper (Layer 3)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ PosterDB     â”‚  â”‚  MediUX     â”‚      â”‚
â”‚  â”‚ Scraper      â”‚  â”‚  Scraper    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚
          â”‚  (5) Playwright automation
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  External Site  â”‚  ThePosterDB.com / MediUX.pro
    â”‚                 â”‚  â€¢ HTML parsing
    â”‚                 â”‚  â€¢ Image URLs extracted
    â”‚                 â”‚  â€¢ Metadata scraped
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚  (6) Returns PosterInfo objects
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  PosterInfo List         â”‚
    â”‚  (Core Layer - Layer 4)  â”‚
    â”‚  [PosterInfo(...),       â”‚
    â”‚   PosterInfo(...),       â”‚
    â”‚   PosterInfo(...)]       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚  (7) Passes to upload service
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  PosterUploadService (Layer 2)     â”‚
    â”‚  â€¢ Iterates poster list            â”‚
    â”‚  â€¢ Downloads each image            â”‚
    â”‚  â€¢ Creates temp files              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚  (8) For each poster
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  PlexService (Layer 2)     â”‚
    â”‚  â€¢ Searches media library  â”‚
    â”‚  â€¢ Matches title (fuzzy)   â”‚
    â”‚  â€¢ Identifies media item   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚  (9) Media item found
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Upload Operation          â”‚
    â”‚  â€¢ item.uploadPoster()     â”‚
    â”‚  â€¢ Add source labels       â”‚
    â”‚  â€¢ Apply rate limiting     â”‚
    â”‚  â€¢ Cleanup temp file       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚  (10) PlexAPI call
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Plex Media Server â”‚  External
    â”‚   â€¢ Poster updated  â”‚
    â”‚   â€¢ Labels added    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚  (11) Success/Error
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Logger (Layer 4)   â”‚
    â”‚  â€¢ Records to file  â”‚
    â”‚  â€¢ Console output   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚  (12) Visual feedback
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  UI Layer           â”‚
    â”‚  â€¢ Progress update  â”‚
    â”‚  â€¢ Success count    â”‚
    â”‚  â€¢ Error reporting  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
         USER
```

---

## ğŸ”— Component Interaction

### Dependency Graph

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  COMPONENT DEPENDENCIES                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   main.py   â”‚ Entry Point
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                 â”‚
       â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PlexPosterGUIâ”‚                  â”‚PlexPosterCLIâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                 â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                                 â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚          â”‚                      â”‚
       â–¼          â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Plex    â”‚ â”‚   Poster    â”‚  â”‚  Scraper         â”‚
â”‚ Service â”‚ â”‚   Upload    â”‚  â”‚  Factory         â”‚
â”‚         â”‚ â”‚   Service   â”‚  â”‚                  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚             â”‚                  â”‚
     â”‚             â”‚                  â–¼
     â”‚             â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚             â”‚         â”‚  PosterDB/      â”‚
     â”‚             â”‚         â”‚  Mediux Scraper â”‚
     â”‚             â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚             â”‚                  â”‚
     â–¼             â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Core Components:               â”‚
â”‚  â€¢ ConfigManager                       â”‚
â”‚  â€¢ Logger                              â”‚
â”‚  â€¢ PosterInfo                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚             â”‚
     â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      External Dependencies:            â”‚
â”‚  â€¢ plexapi (Plex server)               â”‚
â”‚  â€¢ playwright (Browser automation)     â”‚
â”‚  â€¢ requests (HTTP client)              â”‚
â”‚  â€¢ customtkinter (GUI)                 â”‚
â”‚  â€¢ beautifulsoup4 (HTML parsing)       â”‚
â”‚  â€¢ fuzzywuzzy (Fuzzy matching)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Interaction Patterns

#### 1. **Observer Pattern** (GUI Event Handling)
```
User Action (Button Click)
    â”‚
    â–¼
Tab Component Event Handler
    â”‚
    â–¼
Handler Class (ScrapeHandler/LabelHandler)
    â”‚
    â–¼
Service Layer Methods
    â”‚
    â–¼
UI Callback (Update Progress/Status)
```

#### 2. **Factory Pattern** (Scraper Creation)
```
ScraperFactory.scrape_url(url)
    â”‚
    â”œâ”€ if "theposterdb.com" â†’ PosterDBScraper
    â”œâ”€ if "mediux.pro" â†’ MediuxScraper
    â””â”€ if ".html" â†’ Local HTML Parser
```

#### 3. **Context Manager Pattern** (Resource Management)
```python
with PosterDBScraper(use_playwright=True) as scraper:
    posters = scraper.scrape(url)
    # Browser automatically cleaned up
```

#### 4. **Service Pattern** (Business Logic Encapsulation)
```
UI Layer â”€â”€callsâ”€â”€> Service Layer â”€â”€managesâ”€â”€> External APIs
                        â”‚
                        â””â”€â”€usesâ”€â”€> Core Models/Config
```

---

## ğŸ’» Technology Stack

### Core Technologies

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TECHNOLOGY STACK                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Language:  Python 3.10+                                     â”‚
â”‚                                                              â”‚
â”‚  UI Frameworks:                                              â”‚
â”‚  â”œâ”€ CustomTkinter (Modern GUI)                               â”‚
â”‚  â””â”€ Native Terminal (CLI)                                    â”‚
â”‚                                                              â”‚
â”‚  Web Automation:                                             â”‚
â”‚  â”œâ”€ Playwright (Browser automation)                          â”‚
â”‚  â”œâ”€ BeautifulSoup4 (HTML parsing)                            â”‚
â”‚  â””â”€ Requests (HTTP client)                                   â”‚
â”‚                                                              â”‚
â”‚  Plex Integration:                                           â”‚
â”‚  â””â”€ PlexAPI (Official Plex library)                          â”‚
â”‚                                                              â”‚
â”‚  Data Processing:                                            â”‚
â”‚  â”œâ”€ FuzzyWuzzy (Fuzzy string matching)                       â”‚
â”‚  â””â”€ Python-Levenshtein (String distance)                     â”‚
â”‚                                                              â”‚
â”‚  Utilities:                                                  â”‚
â”‚  â”œâ”€ Pillow (Image processing)                                â”‚
â”‚  â”œâ”€ Dataclasses (Type-safe models)                           â”‚
â”‚  â””â”€ Threading (Concurrent operations)                        â”‚
â”‚                                                              â”‚
â”‚  Development:                                                â”‚
â”‚  â”œâ”€ PyInstaller (Executable packaging)                       â”‚
â”‚  â””â”€ setuptools (Package distribution)                        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Design Patterns Summary

| Pattern | Location | Purpose |
|---------|----------|---------|
| **Layered Architecture** | Entire App | Separation of concerns |
| **Factory** | ScraperFactory | Dynamic scraper creation |
| **Strategy** | BaseScraper + Implementations | Pluggable scraping algorithms |
| **Service** | PlexService, UploadService | Business logic encapsulation |
| **Repository** | ConfigManager | Data persistence abstraction |
| **Observer** | GUI Event System | Event-driven UI updates |
| **Context Manager** | Scrapers | Resource lifecycle management |
| **Singleton** | Logger | Centralized logging |
| **Handler Chain** | CLI/GUI Handlers | Request processing pipeline |

---

## ğŸ“Š Key Features by Layer

### Layer Responsibilities Matrix

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     Layer         â•‘                  Responsibilities                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Entry Point       â•‘ â€¢ Bootstrap & dependency check                       â•‘
â•‘ (main.py)         â•‘ â€¢ Command routing                                    â•‘
â•‘                   â•‘ â€¢ Application lifecycle                              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ UI Layer          â•‘ â€¢ User interaction                                   â•‘
â•‘ (src/ui/)         â•‘ â€¢ Input validation                                   â•‘
â•‘                   â•‘ â€¢ Visual feedback & progress                         â•‘
â•‘                   â•‘ â€¢ Dual interface (GUI/CLI)                           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Service Layer     â•‘ â€¢ Business logic                                     â•‘
â•‘ (src/services/)   â•‘ â€¢ Plex API integration                               â•‘
â•‘                   â•‘ â€¢ Media matching & search                            â•‘
â•‘                   â•‘ â€¢ Poster download/upload                             â•‘
â•‘                   â•‘ â€¢ Rate limiting & concurrency                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Scraper Layer     â•‘ â€¢ Web scraping automation                            â•‘
â•‘ (src/scrapers/)   â•‘ â€¢ Anti-detection measures                            â•‘
â•‘                   â•‘ â€¢ Multi-source support                               â•‘
â•‘                   â•‘ â€¢ Metadata extraction                                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Core Layer        â•‘ â€¢ Configuration management                           â•‘
â•‘ (src/core/)       â•‘ â€¢ Logging infrastructure                             â•‘
â•‘                   â•‘ â€¢ Data models & types                                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Utilities Layer   â•‘ â€¢ Helper functions                                   â•‘
â•‘ (src/utils/)      â•‘ â€¢ Text processing                                    â•‘
â•‘                   â•‘ â€¢ Path resolution                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ” Configuration Flow

```
config.json (File System)
        â”‚
        â”‚ Read/Write
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ConfigManager   â”‚
â”‚  â€¢ Loads JSON    â”‚
â”‚  â€¢ Validates     â”‚
â”‚  â€¢ Provides      â”‚
â”‚    defaults      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Creates Config object
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Config          â”‚
â”‚  (Dataclass)     â”‚
â”‚  â€¢ base_url      â”‚
â”‚  â€¢ token         â”‚
â”‚  â€¢ libraries     â”‚
â”‚  â€¢ mappings      â”‚
â”‚  â€¢ delays        â”‚
â”‚  â€¢ etc...        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Injected into
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  All Services & Components   â”‚
â”‚  â€¢ PlexService               â”‚
â”‚  â€¢ Scrapers                  â”‚
â”‚  â€¢ Upload Service            â”‚
â”‚  â€¢ UI Components             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Execution Modes

### 1. GUI Mode
```
$ python main.py gui

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CustomTkinter Window Opens     â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Poster Scrape Tab         â”‚  â”‚
â”‚  â”‚ â€¢ URL input               â”‚  â”‚
â”‚  â”‚ â€¢ Library selection       â”‚  â”‚
â”‚  â”‚ â€¢ Scrape button           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚  Threading for async ops        â”‚
â”‚  Real-time progress updates     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. CLI Interactive Mode
```
$ python main.py cli

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   PLEX POSTER SET HELPER - CLI        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  1. Scrape single URL                 â•‘
â•‘  2. Bulk import from file             â•‘
â•‘  3. Manage title mappings             â•‘
â•‘  4. Reset labels/posters              â•‘
â•‘  5. View statistics                   â•‘
â•‘  6. Settings                          â•‘
â•‘  7. Exit                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 3. Bulk Processing Mode
```
$ python main.py bulk [file.txt]

â€¢ Reads URLs from file
â€¢ Processes sequentially
â€¢ Automated execution
â€¢ No user interaction needed
```

### 4. Single URL Mode
```
$ python main.py https://theposterdb.com/set/12345

â€¢ Direct URL processing
â€¢ Quick one-off scrapes
â€¢ Scriptable
```

---

## ğŸ“ˆ Performance Characteristics

### Concurrency Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CONCURRENCY & THREADING                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Main Thread (UI)                                           â”‚
â”‚  â””â”€ GUI rendering / CLI interaction                         â”‚
â”‚                                                             â”‚
â”‚  Worker Threads (max_workers: 3)                            â”‚
â”‚  â”œâ”€ Thread 1: Scraping operations                           â”‚
â”‚  â”œâ”€ Thread 2: Upload operations                             â”‚
â”‚  â””â”€ Thread 3: Background tasks                              â”‚
â”‚                                                             â”‚
â”‚  Rate Limiting:                                             â”‚
â”‚  â€¢ PosterDB: 0.5s per request                               â”‚
â”‚  â€¢ MediUX: 1.0s per request                                 â”‚
â”‚  â€¢ Batch delay: 2.0s every 10 items                         â”‚
â”‚                                                             â”‚
â”‚  Thread Safety:                                             â”‚
â”‚  â€¢ ScraperFactory uses threading.Lock                       â”‚
â”‚  â€¢ Services are thread-safe                                 â”‚
â”‚  â€¢ Config is read-only after init                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›¡ï¸ Error Handling Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ERROR HANDLING LAYERS                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  Layer 1: Input Validation                           â”‚
â”‚  â”œâ”€ URL format checking                              â”‚
â”‚  â”œâ”€ Configuration validation                         â”‚
â”‚  â””â”€ User input sanitization                          â”‚
â”‚                                                      â”‚
â”‚  Layer 2: Service Level                              â”‚
â”‚  â”œâ”€ Plex connection errors                           â”‚
â”‚  â”œâ”€ Network timeout handling                         â”‚
â”‚  â”œâ”€ API authentication failures                      â”‚
â”‚  â””â”€ Graceful degradation                             â”‚
â”‚                                                      â”‚
â”‚  Layer 3: Scraper Level                              â”‚
â”‚  â”œâ”€ Page load failures                               â”‚
â”‚  â”œâ”€ Element not found                                â”‚
â”‚  â”œâ”€ Playwright crashes                               â”‚
â”‚  â””â”€ Retry mechanisms                                 â”‚
â”‚                                                      â”‚
â”‚  Layer 4: Logging & Recovery                         â”‚
â”‚  â”œâ”€ Exception capture                                â”‚
â”‚  â”œâ”€ Debug log writing                                â”‚
â”‚  â”œâ”€ User-friendly error messages                     â”‚
â”‚  â””â”€ Cleanup on failure                               â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Future Architecture Considerations

### Potential Enhancements

1. **Plugin System**
   - Dynamic scraper loading
   - Custom source integration
   - User-defined processors

2. **Database Layer**
   - SQLite for cache
   - Scraping history
   - Faster lookups

3. **API Layer**
   - RESTful API endpoint
   - Web interface
   - Remote control

4. **Microservices**
   - Separate scraping service
   - Queue-based architecture
   - Horizontal scaling

---

## ğŸ“ File Structure Mapping

```
plex-poster-set-helper/
â”‚
â”œâ”€ main.py ................................. Entry Point (Layer 0)
â”œâ”€ config.json ............................. Configuration Storage
â”œâ”€ requirements.txt ........................ Dependencies
â”œâ”€ setup.py ................................ Installation Script
â”‚
â”œâ”€ src/
â”‚  â”œâ”€ __init__.py
â”‚  â”‚
â”‚  â”œâ”€ ui/ .................................. UI Layer (Layer 1)
â”‚  â”‚  â”œâ”€ cli/
â”‚  â”‚  â”‚  â”œâ”€ app.py ......................... CLI Application
â”‚  â”‚  â”‚  â””â”€ handlers/
â”‚  â”‚  â”‚     â”œâ”€ url_handler.py
â”‚  â”‚  â”‚     â”œâ”€ mapping_handler.py
â”‚  â”‚  â”‚     â”œâ”€ reset_handler.py
â”‚  â”‚  â”‚     â””â”€ stats_handler.py
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ gui/
â”‚  â”‚     â”œâ”€ app.py ......................... GUI Application
â”‚  â”‚     â”œâ”€ tabs/ .......................... Tab Components
â”‚  â”‚     â”œâ”€ handlers/ ...................... Business Handlers
â”‚  â”‚     â””â”€ widgets/ ....................... Reusable Widgets
â”‚  â”‚
â”‚  â”œâ”€ services/ ............................ Service Layer (Layer 2)
â”‚  â”‚  â”œâ”€ plex_service.py ................... Plex Integration
â”‚  â”‚  â””â”€ poster_upload_service.py .......... Upload Logic
â”‚  â”‚
â”‚  â”œâ”€ scrapers/ ............................ Scraper Layer (Layer 3)
â”‚  â”‚  â”œâ”€ base_scraper.py ................... Abstract Base
â”‚  â”‚  â”œâ”€ scraper_factory.py ................ Factory
â”‚  â”‚  â”œâ”€ posterdb_scraper.py ............... PosterDB Implementation
â”‚  â”‚  â””â”€ mediux_scraper.py ................. MediUX Implementation
â”‚  â”‚
â”‚  â”œâ”€ core/ ................................ Core Layer (Layer 4)
â”‚  â”‚  â”œâ”€ config.py ......................... Configuration
â”‚  â”‚  â”œâ”€ logger.py ......................... Logging
â”‚  â”‚  â””â”€ models.py ......................... Data Models
â”‚  â”‚
â”‚  â””â”€ utils/ ............................... Utilities Layer (Layer 5)
â”‚     â”œâ”€ helpers.py ........................ Helper Functions
â”‚     â””â”€ text_utils.py ..................... Text Processing
â”‚
â””â”€ build/ .................................. Build Artifacts
   â””â”€ icons/ ............................... Application Icons
```

---

## ğŸ” Quick Reference: Component Communication

| From Component | To Component | Communication Method | Data Passed |
|----------------|--------------|---------------------|-------------|
| main.py | GUI/CLI App | Direct instantiation | Config object |
| UI Tabs | Handlers | Method calls | User input |
| Handlers | Services | Service methods | Processing requests |
| Services | ScraperFactory | Factory method | URL string |
| ScraperFactory | Specific Scraper | Context manager | Config object |
| Scraper | External Site | Playwright/Requests | HTTP requests |
| Scraper | UI | Return value | PosterInfo list |
| UploadService | PlexService | Method calls | PosterInfo objects |
| PlexService | Plex Server | PlexAPI | API calls |
| All Components | Logger | Logger calls | Log messages |
| All Components | ConfigManager | Config access | Settings retrieval |

---

## ğŸ“ Architecture Principles

### SOLID Principles Applied

- **S**ingle Responsibility: Each class has one clear purpose
- **O**pen/Closed: Scrapers extend BaseScraper without modification
- **L**iskov Substitution: Any scraper can replace another
- **I**nterface Segregation: Thin, focused interfaces
- **D**ependency Inversion: Depend on abstractions (BaseScraper)

### Additional Patterns

- **Separation of Concerns**: Clear layer boundaries
- **DRY** (Don't Repeat Yourself): Shared utilities and base classes
- **Convention over Configuration**: Sensible defaults
- **Fail-Fast**: Early validation and error detection

---

## ğŸ“š Legend

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Symbol Guide                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”  Component/Module                            â”‚
â”‚  â”‚   â”‚                                              â”‚
â”‚  â””â”€â”€â”€â”˜                                              â”‚
â”‚                                                     â”‚
â”‚   â”‚    Data flow / Dependency                       â”‚
â”‚   â–¼                                                 â”‚
â”‚                                                     â”‚
â”‚   â”œâ”€   Relationship / Contains                      â”‚
â”‚                                                     â”‚
â”‚   â€¢    Bullet point / Feature                       â”‚
â”‚                                                     â”‚
â”‚   â•    Strong boundary                              â”‚
â”‚   â”€    Weak boundary                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Document Version:** 1.0  
**Last Updated:** January 15, 2026  
**Application Version:** Based on current codebase snapshot  

---

> ğŸ’¡ **Tip**: This architecture is designed for maintainability and extensibility. When adding new features, identify the appropriate layer and follow existing patterns for consistency.
